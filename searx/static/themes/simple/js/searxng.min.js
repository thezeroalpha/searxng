/**
 * @license
 * (C) Copyright Contributors to the SearXNG project.
 * (C) Copyright Contributors to the searx project (2014 - 2021).
 * SPDX-License-Identifier: AGPL-3.0-or-later
 */window.searxng=function(g,d){g.Element&&function(i){i.matches=i.matches||i.matchesSelector||i.webkitMatchesSelector||i.msMatchesSelector||function(u){for(var r=this,n=(r.parentNode||r.document).querySelectorAll(u),e=-1;n[++e]&&n[e]!=r;);return!!n[e]}}(Element.prototype);function a(i,u,r){try{i.call(u,r)}catch(n){console.log(n)}}var p=window.searxng||{};p.on=function(i,u,r,n){n=n||!1,typeof i!="string"?i.addEventListener(u,r,n):d.addEventListener(u,function(e){for(var t=e.target||e.srcElement,o=!1;t&&t.matches&&t!==d&&!(o=t.matches(i));)t=t.parentElement;o&&a(r,t,e)},n)},p.ready=function(i){document.readyState!="loading"?i.call(g):g.addEventListener("DOMContentLoaded",i.bind(g))},p.http=function(i,u,r=null){return new Promise(function(n,e){try{var t=new XMLHttpRequest;t.open(i,u,!0),t.timeout=2e4,t.onload=function(){t.status==200?n(t.response,t.responseType):e(Error(t.statusText))},t.onerror=function(){e(Error("Network Error"))},t.onabort=function(){e(Error("Transaction is aborted"))},t.ontimeout=function(){e(Error("Timeout"))},r?t.send(r):t.send()}catch(o){e(o)}})},p.loadStyle=function(i){var u=p.settings.theme_static_path+"/"+i,r="style_"+i.replace(".","_"),n=d.getElementById(r);n===null&&(n=d.createElement("link"),n.setAttribute("id",r),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",u),d.body.appendChild(n))},p.loadScript=function(i,u){var r=p.settings.theme_static_path+"/"+i,n="script_"+i.replace(".","_"),e=d.getElementById(n);if(e===null)e=d.createElement("script"),e.setAttribute("id",n),e.setAttribute("src",r),e.onload=u,e.onerror=function(){e.setAttribute("error","1")},d.body.appendChild(e);else if(e.hasAttribute("error"))console.log("callback not executed : script '"+r+"' not loaded.");else try{u.apply(e,[])}catch(t){console.log(t)}},p.insertBefore=function(i,u){u.parentNode.insertBefore(i,u)},p.insertAfter=function(i,u){u.parentNode.insertAfter(i,u.nextSibling)},p.on(".close","click",function(){this.parentNode.classList.add("invisible")});function m(){for(var i of d.getElementsByTagName("body")[0].classList.values())if(i.endsWith("_endpoint"))return i.split("_")[0];return""}return p.endpoint=m(),p}(window,document);searxng.ready(function(){if(searxng.infinite_scroll_supported="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,searxng.endpoint!=="results")return;if(!searxng.infinite_scroll_supported){console.log("IntersectionObserver not supported");return}let g=document;var d=g.getElementById("results").classList.contains("only_template_images");function a(){var i=g.createElement("div");return i.classList.add("loader"),i}function p(i,u){i.textContent="",u.forEach(r=>i.appendChild(r))}function m(i){var u=g.querySelector("#pagination form.next_page");if(u){p(g.querySelector("#pagination"),[a()]);var r=new FormData(u);searxng.http("POST",g.querySelector("#search").getAttribute("action"),r).then(function(n){var e=new DOMParser().parseFromString(n,"text/html"),t=e.querySelectorAll("#urls article"),o=e.querySelector("#pagination");g.querySelector("#pagination").remove(),t.length>0&&!d&&g.querySelector("#urls").appendChild(g.createElement("hr")),t.forEach(c=>{g.querySelector("#urls").appendChild(c)}),o&&(g.querySelector("#results").appendChild(o),i())}).catch(function(n){console.log(n);var e=g.createElement("div");e.textContent=searxng.settings.translations.error_loading_next_page,e.classList.add("dialog-error"),e.setAttribute("role","alert"),p(g.querySelector("#pagination"),[e])})}}if(searxng.settings.infinite_scroll&&searxng.infinite_scroll_supported){const i={rootMargin:"20rem"},u="article.result:last-child",r=new IntersectionObserver(n=>{const e=n[0];e.isIntersecting&&(r.unobserve(e.target),m(()=>r.observe(g.querySelector(u),i)))});r.observe(g.querySelector(u),i)}});searxng.ready(function(){function g(s){for(;s!==void 0;){if(s.classList.contains("detail"))return!0;if(s.classList.contains("result"))return!1;s=s.parentNode}return!1}function d(s){for(;s!==void 0;){if(s.classList.contains("result"))return s;s=s.parentNode}}function a(s){return s&&s.classList.contains("result-images")}searxng.on(".result","click",function(s){if(!g(s.target)){r(this)(!0,!0);let f=d(s.target);a(f)&&(s.preventDefault(),searxng.selectImage(f))}}),searxng.on(".result a","focus",function(s){if(!g(s.target)){let f=d(s.target);f&&f.getAttribute("data-vim-selected")===null&&r(f)(!0),a(f)&&searxng.selectImage(f)}},!0);var p={Escape:{key:"ESC",fun:e,des:"remove focus from the focused input",cat:"Control"},c:{key:"c",fun:T,des:"copy url of the selected result to the clipboard",cat:"Results"},h:{key:"h",fun:O,des:"toggle help window",cat:"Other"},i:{key:"i",fun:b,des:"focus on the search input",cat:"Control"},n:{key:"n",fun:o(),des:"go to next page",cat:"Results"},o:{key:"o",fun:M(!1),des:"open search result",cat:"Results"},p:{key:"p",fun:c(),des:"go to previous page",cat:"Results"},r:{key:"r",fun:n,des:"reload page from the server",cat:"Control"},t:{key:"t",fun:M(!0),des:"open the result in a new tab",cat:"Results"}},m={default:Object.assign({ArrowLeft:{key:"←",fun:r("up"),des:"select previous search result",cat:"Results"},ArrowRight:{key:"→",fun:r("down"),des:"select next search result",cat:"Results"}},p),vim:Object.assign({b:{key:"b",fun:h(-window.innerHeight),des:"scroll one page up",cat:"Navigation"},f:{key:"f",fun:h(window.innerHeight),des:"scroll one page down",cat:"Navigation"},u:{key:"u",fun:h(-window.innerHeight/2),des:"scroll half a page up",cat:"Navigation"},d:{key:"d",fun:h(window.innerHeight/2),des:"scroll half a page down",cat:"Navigation"},g:{key:"g",fun:v(-document.body.scrollHeight,"top"),des:"scroll to the top of the page",cat:"Navigation"},G:{key:"G",fun:v(document.body.scrollHeight,"bottom"),des:"scroll to the bottom of the page",cat:"Navigation"},k:{key:"k",fun:r("up"),des:"select previous search result",cat:"Results"},j:{key:"j",fun:r("down"),des:"select next search result",cat:"Results"},y:{key:"y",fun:T,des:"copy url of the selected result to the clipboard",cat:"Results"}},p)},i=window.matchMedia("(any-pointer: coarse)").matches,u=i?m.vim:m[searxng.settings.hotkeys]||m.default;searxng.on(document,"keydown",function(s){if(Object.prototype.hasOwnProperty.call(u,s.key)&&!s.ctrlKey&&!s.altKey&&!s.metaKey){var f=s.target.tagName.toLowerCase();s.key==="Escape"?u[s.key].fun(s):(s.target===document.body||f==="a"||f==="button")&&(s.preventDefault(),u[s.key].fun())}});function r(s){return function(f,k){var E=document.querySelector(".result[data-vim-selected]"),A=s;if(E===null){if(E=document.querySelector(".result"),E===null)return;(s==="down"||s==="up")&&(A=E)}var y,w=document.querySelectorAll(".result");if(w=Array.from(w),typeof A!="string")y=A;else switch(A){case"visible":for(var I=document.documentElement.scrollTop||document.body.scrollTop,N=I+document.documentElement.clientHeight,R=0;R<w.length;R++){y=w[R];var D=y.offsetTop,q=D+y.clientHeight;if(q<=N&&D>I)break}break;case"down":y=w[w.indexOf(E)+1]||E;break;case"up":y=w[w.indexOf(E)-1]||E;break;case"bottom":y=w[w.length-1];break;case"top":default:y=w[0]}if(y){if(E.removeAttribute("data-vim-selected"),y.setAttribute("data-vim-selected","true"),!k){var C=y.querySelector("h3 a")||y.querySelector("a");C!==null&&C.focus()}f||l()}}}function n(){document.location.reload(!0)}function e(s){const f=s.target.tagName.toLowerCase();document.activeElement&&(f==="input"||f==="select"||f==="textarea")?document.activeElement.blur():searxng.closeDetail()}function t(s){return function(){var f=document.querySelector(s);f&&f.click()}}function o(){return t('nav#pagination .next_page button[type="submit"]')}function c(){return t('nav#pagination .previous_page button[type="submit"]')}function l(){var s=document.querySelector(".result[data-vim-selected]");if(s!==null){var f=document.documentElement.scrollTop||document.body.scrollTop,k=document.documentElement.clientHeight,E=s.offsetTop,A=E+s.clientHeight,y=120;if(s.previousElementSibling===null&&A<k){window.scroll(window.scrollX,0);return}if(f>E-y)window.scroll(window.scrollX,E-y);else{var w=f+k;w<A+y&&window.scroll(window.scrollX,A-k+y)}}}function h(s){return function(){window.scrollBy(0,s),r("visible")()}}function v(s,f){return function(){window.scrollTo(0,s),r(f)()}}function b(){window.scrollTo(0,0);var s=document.querySelector("#q");if(s.focus(),s.setSelectionRange){var f=s.value.length;s.setSelectionRange(f,f)}}function M(s){return function(){var f=document.querySelector(".result[data-vim-selected] h3 a");if(f===null&&(f=document.querySelector(".result[data-vim-selected] > a")),f!==null){var k=f.getAttribute("href");s?window.open(k):window.location.href=k}}}function _(s){var f={};for(var k in u){var E=u[k];f[E.cat]=f[E.cat]||[],f[E.cat].push(E)}var A=Object.keys(f).sort(function(q,C){return f[C].length-f[q].length});if(A.length!==0){var y='<a href="#" class="close" aria-label="close" title="close">×</a>';y+="<h3>How to navigate SearXNG with hotkeys</h3>",y+="<table>";for(var w=0;w<A.length;w++){var I=f[A[w]],N=w===A.length-1,R=w%2===0;R&&(y+="<tr>"),y+="<td>",y+="<h4>"+I[0].cat+"</h4>",y+='<ul class="list-unstyled">';for(var D in I)y+="<li><kbd>"+I[D].key+"</kbd> "+I[D].des+"</li>";y+="</ul>",y+="</td>",(!R||N)&&(y+="</tr>")}y+="</table>",s.innerHTML=y}}function O(){var s=document.querySelector("#vim-hotkeys-help");if(s==null){s=document.createElement("div"),s.id="vim-hotkeys-help",s.className="dialog-modal",_(s);var f=document.getElementsByTagName("body")[0];f.appendChild(s)}else{s.classList.toggle("invisible");return}}function T(){var s=document.querySelector(".result[data-vim-selected] h3 a");if(s===null)return;const f=s.getAttribute("href");navigator.clipboard.writeText(f)}searxng.scrollPageToSelected=l,searxng.selectNext=r("down"),searxng.selectPrevious=r("up")});(function(g,d,a){a.ready(function(){a.on(".searxng_init_map","click",function(p){this.classList.remove("searxng_init_map");var m=this.dataset.leafletTarget,i=parseFloat(this.dataset.mapLon),u=parseFloat(this.dataset.mapLat),r=parseFloat(this.dataset.mapZoom),n=JSON.parse(this.dataset.mapBoundingbox),e=JSON.parse(this.dataset.mapGeojson);a.loadStyle("css/leaflet.css"),a.loadScript("js/leaflet.js",function(){var t=null;if(n){var o=L.latLng(n[0],n[2]),c=L.latLng(n[1],n[3]);t=L.latLngBounds(o,c)}var l=L.map(m),h="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",v='Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors',b=new L.TileLayer(h,{minZoom:1,maxZoom:19,attribution:v}),M="https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png",_='Wikimedia maps | Maps data © <a href="https://openstreetmap.org">OpenStreetMap contributors</a>',O=new L.TileLayer(M,{minZoom:1,maxZoom:19,attribution:_});t?setTimeout(function(){l.fitBounds(t,{maxZoom:17})},0):i&&u&&(r?l.setView(new L.latLng(u,i),r):l.setView(new L.latLng(u,i),8)),l.addLayer(b);var T={"OSM Mapnik":b,"OSM Wikimedia":O};L.control.layers(T).addTo(l),e&&L.geoJson(e).addTo(l)}),p.preventDefault()})})})(window,document,window.searxng);(function(g,d,a){a.endpoint==="preferences"&&a.ready(function(){let p=null;function m(){p==null&&a.http("GET","engine_descriptions.json").then(function(t){p=JSON.parse(t);for(const[o,c]of Object.entries(p)){let l=d.querySelectorAll('[data-engine-name="'+o+'"] .engine-description');for(const h of l){let v=" (<i>"+a.settings.translations.Source+":&nbsp;"+c[1]+"</i>)";h.innerHTML=c[0]+v}}})}for(const t of d.querySelectorAll("[data-engine-name]"))a.on(t,"mouseenter",m);const i=d.querySelectorAll(".enable-all-engines"),u=d.querySelectorAll(".disable-all-engines"),r=d.querySelectorAll("tbody input[type=checkbox][class~=checkbox-onoff]"),n=t=>{for(const o of r)o.offsetParent!==null&&(o.checked=!t)};for(const t of i)a.on(t,"click",()=>n(!0));for(const t of u)a.on(t,"click",()=>n(!1));const e=d.querySelector("#copy-hash");a.on(e,"click",t=>{t.preventDefault(),navigator.clipboard.writeText(e.dataset.hash),e.innerText=e.dataset.copiedText})})})(window,document,window.searxng);/*!
 * swiped-events.js - v@version@
 * Pure JavaScript swipe events
 * https://github.com/john-doherty/swiped-events
 * @inspiration https://stackoverflow.com/questions/16348031/disable-scrolling-when-touch-moving-certain-element
 * @author John Doherty <www.johndoherty.info>
 * @license MIT
 */(function(g,d){typeof g.CustomEvent!="function"&&(g.CustomEvent=function(l,h){h=h||{bubbles:!1,cancelable:!1,detail:void 0};var v=d.createEvent("CustomEvent");return v.initCustomEvent(l,h.bubbles,h.cancelable,h.detail),v},g.CustomEvent.prototype=g.Event.prototype),d.addEventListener("touchstart",t,!1),d.addEventListener("touchmove",o,!1),d.addEventListener("touchend",e,!1);var a=null,p=null,m=null,i=null,u=null,r=null,n=0;function e(l){if(r===l.target){var h=parseInt(c(r,"data-swipe-threshold","20"),10),v=c(r,"data-swipe-unit","px"),b=parseInt(c(r,"data-swipe-timeout","500"),10),M=Date.now()-u,_="",O=l.changedTouches||l.touches||[];if(v==="vh"&&(h=Math.round(h/100*d.documentElement.clientHeight)),v==="vw"&&(h=Math.round(h/100*d.documentElement.clientWidth)),Math.abs(m)>Math.abs(i)?Math.abs(m)>h&&M<b&&(m>0?_="swiped-left":_="swiped-right"):Math.abs(i)>h&&M<b&&(i>0?_="swiped-up":_="swiped-down"),_!==""){var T={dir:_.replace(/swiped-/,""),touchType:(O[0]||{}).touchType||"direct",fingers:n,xStart:parseInt(a,10),xEnd:parseInt((O[0]||{}).clientX||-1,10),yStart:parseInt(p,10),yEnd:parseInt((O[0]||{}).clientY||-1,10)};r.dispatchEvent(new CustomEvent("swiped",{bubbles:!0,cancelable:!0,detail:T})),r.dispatchEvent(new CustomEvent(_,{bubbles:!0,cancelable:!0,detail:T}))}a=null,p=null,u=null}}function t(l){l.target.getAttribute("data-swipe-ignore")!=="true"&&(r=l.target,u=Date.now(),a=l.touches[0].clientX,p=l.touches[0].clientY,m=0,i=0,n=l.touches.length)}function o(l){if(!(!a||!p)){var h=l.touches[0].clientX,v=l.touches[0].clientY;m=a-h,i=p-v}}function c(l,h,v){for(;l&&l!==d.documentElement;){var b=l.getAttribute(h);if(b)return b;l=l.parentNode}return v}})(window,document);(function(g,d,a){a.endpoint==="results"&&a.ready(function(){d.querySelectorAll("#urls img").forEach(r=>r.addEventListener("error",()=>{r.src=window.searxng.settings.theme_static_path+"/img/img_load_error.svg"},{once:!0})),d.querySelector("#search_url button#copy_url")&&(d.querySelector("#search_url button#copy_url").style.display="block"),a.on(".btn-collapse","click",function(){var r=this.getAttribute("data-btn-text-collapsed"),n=this.getAttribute("data-btn-text-not-collapsed"),e=this.getAttribute("data-target"),t=d.querySelector(e),o=this.innerHTML;this.classList.contains("collapsed")?o=o.replace(r,n):o=o.replace(n,r),this.innerHTML=o,this.classList.toggle("collapsed"),t.classList.toggle("invisible")}),a.on(".media-loader","click",function(){var r=this.getAttribute("data-target"),n=d.querySelector(r+" > iframe"),e=n.getAttribute("src");(e==null||e===!1)&&n.setAttribute("src",n.getAttribute("data-src"))}),a.on("#copy_url","click",function(){var r=this.parentElement.querySelector("pre");navigator.clipboard.writeText(r.innerText),this.innerText=this.dataset.copiedText});let p;const m=d.createElement("div");m.classList.add("loader");const i=new Image,u=(r,n)=>{p&&clearTimeout(p),p=setTimeout(()=>{i.src=r},1e3),i.onload=()=>{n(),m.remove()},i.onerror=()=>{m.remove()}};a.selectImage=r=>{if(d.getElementById("results").classList.add("image-detail-open"),window.location.hash="#image-viewer",a.scrollPageToSelected(),!r)return;const n=r.querySelector(".result-images-source img");if(!n)return;const e=n.getAttribute("data-src");if(!e)return;const t=r.querySelector(".image_thumbnail");n.src=t.src,r.querySelector(".detail").appendChild(m),u(e,()=>{n.src=e,n.removeAttribute("data-src")})},a.closeDetail=function(){d.getElementById("results").classList.remove("image-detail-open"),window.location.hash=="#image-viewer"&&window.history.back(),a.scrollPageToSelected()},a.on(".result-detail-close","click",r=>{r.preventDefault(),a.closeDetail()}),a.on(".result-detail-previous","click",r=>{r.preventDefault(),a.selectPrevious(!1)}),a.on(".result-detail-next","click",r=>{r.preventDefault(),a.selectNext(!1)}),window.addEventListener("hashchange",()=>{window.location.hash!="#image-viewer"&&a.closeDetail()}),d.querySelectorAll(".swipe-horizontal").forEach(r=>{r.addEventListener("swiped-left",function(){a.selectNext(!1)}),r.addEventListener("swiped-right",function(){a.selectPrevious(!1)})}),g.addEventListener("scroll",function(){var r=d.getElementById("backToTop"),n=document.documentElement.scrollTop||document.body.scrollTop,e=d.getElementById("results");r!==null&&(n>=100?e.classList.add("scrolling"):e.classList.remove("scrolling"))},!0)})})(window,document,window.searxng);function B(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}function x(g){throw new Error('Could not dynamically require "'+g+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var H={exports:{}},P;function K(){return P||(P=1,function(g,d){(function(a){g.exports=a()})(function(){return function(){function a(p,m,i){function u(e,t){if(!m[e]){if(!p[e]){var o=typeof x=="function"&&x;if(!t&&o)return o(e,!0);if(r)return r(e,!0);var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}var l=m[e]={exports:{}};p[e][0].call(l.exports,function(h){var v=p[e][1][h];return u(v||h)},l,l.exports,a,p,m,i)}return m[e].exports}for(var r=typeof x=="function"&&x,n=0;n<i.length;n++)u(i[n]);return u}return a}()({1:[function(a,p,m){var i;(function(n){n[n.AND=0]="AND",n[n.OR=1]="OR"})(i||(i={}));var u;(function(n){n[n.KEYDOWN=0]="KEYDOWN",n[n.KEYUP=1]="KEYUP"})(u||(u={}));var r=function(){function n(e,t){if(e===void 0&&(e={}),t===void 0&&(t="[data-autocomplete]"),Array.isArray(t))t.forEach(function(l){new n(e,l)});else if(typeof t=="string"){var o=document.querySelectorAll(t);Array.prototype.forEach.call(o,function(l){new n(e,l)})}else{var c=n.merge(n.defaults,e,{DOMResults:document.createElement("div")});return n.prototype.create(c,t),c}}return n.prototype.create=function(e,t){if(e.Input=t,e.Input.nodeName.match(/^INPUT$/i)&&(e.Input.hasAttribute("type")===!1||e.Input.getAttribute("type").match(/^TEXT|SEARCH$/i))){e.Input.setAttribute("autocomplete","off"),e._Position(e),e.Input.parentNode.appendChild(e.DOMResults),e.$Listeners={blur:e._Blur.bind(e),destroy:n.prototype.destroy.bind(null,e),focus:e._Focus.bind(e),keyup:n.prototype.event.bind(null,e,u.KEYUP),keydown:n.prototype.event.bind(null,e,u.KEYDOWN),position:e._Position.bind(e)};for(var o in e.$Listeners)e.Input.addEventListener(o,e.$Listeners[o])}},n.prototype.getEventsByType=function(e,t){var o={};for(var c in e.KeyboardMappings){var l=u.KEYUP;e.KeyboardMappings[c].Event!==void 0&&(l=e.KeyboardMappings[c].Event),l==t&&(o[c]=e.KeyboardMappings[c])}return o},n.prototype.event=function(e,t,o){var c=function(b){(v===!0&&h.Operator==i.AND||v===!1&&h.Operator==i.OR)&&(b=n.merge({Not:!1},b),b.hasOwnProperty("Is")?b.Is==o.keyCode?v=!b.Not:v=b.Not:b.hasOwnProperty("From")&&b.hasOwnProperty("To")&&(o.keyCode>=b.From&&o.keyCode<=b.To?v=!b.Not:v=b.Not))};for(var l in n.prototype.getEventsByType(e,t)){var h=n.merge({Operator:i.AND},e.KeyboardMappings[l]),v=i.AND==h.Operator;h.Conditions.forEach(c),v===!0&&h.Callback.call(e,o)}},n.prototype.makeRequest=function(e,t,o){var c=Object.getOwnPropertyNames(e.HttpHeaders),l=new XMLHttpRequest,h=e._HttpMethod(),v=e._Url(),b=e._Pre(),M=encodeURIComponent(e._QueryArg())+"="+encodeURIComponent(b);h.match(/^GET$/i)&&(v.indexOf("?")!==-1?v+="&"+M:v+="?"+M),l.open(h,v,!0);for(var _=c.length-1;_>=0;_--)l.setRequestHeader(c[_],e.HttpHeaders[c[_]]);return l.onreadystatechange=function(){l.readyState==4&&l.status==200?(e.$Cache[b]=l.response,t(l.response)):l.status>=400&&o()},l},n.prototype.ajax=function(e,t,o){o===void 0&&(o=!0),e.$AjaxTimer&&window.clearTimeout(e.$AjaxTimer),o===!0?e.$AjaxTimer=window.setTimeout(n.prototype.ajax.bind(null,e,t,!1),e.Delay):(e.Request&&e.Request.abort(),e.Request=t,e.Request.send(e._QueryArg()+"="+e._Pre()))},n.prototype.cache=function(e,t,o){var c=e._Cache(e._Pre());if(c===void 0){var l=n.prototype.makeRequest(e,t,o);n.prototype.ajax(e,l)}else t(c)},n.prototype.destroy=function(e){for(var t in e.$Listeners)e.Input.removeEventListener(t,e.$Listeners[t]);e.DOMResults.parentNode.removeChild(e.DOMResults)},n.merge=function(){for(var e={},t,o=0;o<arguments.length;o++)for(t in arguments[o])e[t]=arguments[o][t];return e},n.defaults={Delay:150,EmptyMessage:"No result here",Highlight:{getRegex:function(e){return new RegExp(e,"ig")},transform:function(e){return"<strong>"+e+"</strong>"}},HttpHeaders:{"Content-type":"application/x-www-form-urlencoded"},Limit:0,MinChars:0,HttpMethod:"GET",QueryArg:"q",Url:null,KeyboardMappings:{Enter:{Conditions:[{Is:13,Not:!1}],Callback:function(e){if(this.DOMResults.getAttribute("class").indexOf("open")!=-1){var t=this.DOMResults.querySelector("li.active");t!==null&&(e.preventDefault(),this._Select(t),this.DOMResults.setAttribute("class","autocomplete"))}},Operator:i.AND,Event:u.KEYDOWN},KeyUpAndDown_down:{Conditions:[{Is:38,Not:!1},{Is:40,Not:!1}],Callback:function(e){e.preventDefault()},Operator:i.OR,Event:u.KEYDOWN},KeyUpAndDown_up:{Conditions:[{Is:38,Not:!1},{Is:40,Not:!1}],Callback:function(e){e.preventDefault();var t=this.DOMResults.querySelector("li:first-child:not(.locked)"),o=this.DOMResults.querySelector("li:last-child:not(.locked)"),c=this.DOMResults.querySelector("li.active");if(c){var l=Array.prototype.indexOf.call(c.parentNode.children,c),h=l+(e.keyCode-39),v=this.DOMResults.getElementsByTagName("li").length;h<0?h=v-1:h>=v&&(h=0),c.classList.remove("active"),c.parentElement.children.item(h).classList.add("active")}else o&&e.keyCode==38?o.classList.add("active"):t&&t.classList.add("active")},Operator:i.OR,Event:u.KEYUP},AlphaNum:{Conditions:[{Is:13,Not:!0},{From:35,To:40,Not:!0}],Callback:function(){var e=this.Input.getAttribute("data-autocomplete-old-value"),t=this._Pre();t!==""&&t.length>=this._MinChars()?((!e||t!=e)&&this.DOMResults.setAttribute("class","autocomplete open"),n.prototype.cache(this,(function(o){this._Render(this._Post(o)),this._Open()}).bind(this),this._Error)):this._Close()},Operator:i.AND,Event:u.KEYUP}},DOMResults:null,Request:null,Input:null,_EmptyMessage:function(){var e="";return this.Input.hasAttribute("data-autocomplete-empty-message")?e=this.Input.getAttribute("data-autocomplete-empty-message"):this.EmptyMessage!==!1?e=this.EmptyMessage:e="",e},_Limit:function(){var e=this.Input.getAttribute("data-autocomplete-limit");return isNaN(e)||e===null?this.Limit:parseInt(e,10)},_MinChars:function(){var e=this.Input.getAttribute("data-autocomplete-minchars");return isNaN(e)||e===null?this.MinChars:parseInt(e,10)},_Highlight:function(e){return e.replace(this.Highlight.getRegex(this._Pre()),this.Highlight.transform)},_HttpMethod:function(){return this.Input.hasAttribute("data-autocomplete-method")?this.Input.getAttribute("data-autocomplete-method"):this.HttpMethod},_QueryArg:function(){return this.Input.hasAttribute("data-autocomplete-param-name")?this.Input.getAttribute("data-autocomplete-param-name"):this.QueryArg},_Url:function(){return this.Input.hasAttribute("data-autocomplete")?this.Input.getAttribute("data-autocomplete"):this.Url},_Blur:function(e){if(e===void 0&&(e=!1),e)this._Close();else{var t=this;setTimeout(function(){t._Blur(!0)},150)}},_Cache:function(e){return this.$Cache[e]},_Focus:function(){var e=this.Input.getAttribute("data-autocomplete-old-value");(!e||this.Input.value!=e)&&this._MinChars()<=this.Input.value.length&&this.DOMResults.setAttribute("class","autocomplete open")},_Open:function(){var e=this;Array.prototype.forEach.call(this.DOMResults.getElementsByTagName("li"),function(t){t.getAttribute("class")!="locked"&&(t.onclick=function(){e._Select(t)})})},_Close:function(){this.DOMResults.setAttribute("class","autocomplete")},_Position:function(){this.DOMResults.setAttribute("class","autocomplete"),this.DOMResults.setAttribute("style","top:"+(this.Input.offsetTop+this.Input.offsetHeight)+"px;left:"+this.Input.offsetLeft+"px;width:"+this.Input.clientWidth+"px;")},_Render:function(e){var t;typeof e=="string"?t=this._RenderRaw(e):t=this._RenderResponseItems(e),this.DOMResults.hasChildNodes()&&this.DOMResults.removeChild(this.DOMResults.childNodes[0]),this.DOMResults.appendChild(t)},_RenderResponseItems:function(e){var t=document.createElement("ul"),o=document.createElement("li"),c=this._Limit();c<0?e=e.reverse():c===0&&(c=e.length);for(var l=0;l<Math.min(Math.abs(c),e.length);l++)o.innerHTML=e[l].Label,o.setAttribute("data-autocomplete-value",e[l].Value),t.appendChild(o),o=document.createElement("li");return t},_RenderRaw:function(e){var t=document.createElement("ul"),o=document.createElement("li");if(e.length>0)this.DOMResults.innerHTML=e;else{var c=this._EmptyMessage();c!==""&&(o.innerHTML=c,o.setAttribute("class","locked"),t.appendChild(o))}return t},_Post:function(e){try{var t=[],o=JSON.parse(e);if(Object.keys(o).length===0)return"";if(Array.isArray(o))for(var c=0;c<Object.keys(o).length;c++)t[t.length]={Value:o[c],Label:this._Highlight(o[c])};else for(var l in o)t.push({Value:l,Label:this._Highlight(o[l])});return t}catch{return e}},_Pre:function(){return this.Input.value},_Select:function(e){e.hasAttribute("data-autocomplete-value")?this.Input.value=e.getAttribute("data-autocomplete-value"):this.Input.value=e.innerHTML,this.Input.setAttribute("data-autocomplete-old-value",this.Input.value)},_Error:function(){},$AjaxTimer:null,$Cache:{},$Listeners:{}},n}();p.exports=r},{}]},{},[1])(1)})}(H)),H.exports}var U=K();const S=B(U);(function(g,d,a){var p="q",m;const i=window.matchMedia("only screen and (max-width: 50em)").matches;function u(){if(m.value.length>0){var n=document.getElementById("search");setTimeout(n.submit.bind(n),0)}}function r(n){var e=document.getElementById("clear_search"),t=function(){n.value.length===0?e.classList.add("empty"):e.classList.remove("empty")};t(),e.addEventListener("click",function(o){n.value="",n.focus(),t(),o.preventDefault()}),n.addEventListener("input",t,!1)}a.ready(function(){m=d.getElementById(p),m!==null&&(r(m),a.settings.autocomplete&&(a.autocomplete=S.call(g,{Url:"./autocompleter",EmptyMessage:a.settings.translations.no_item_found,HttpMethod:a.settings.method,HttpHeaders:{"Content-type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"},MinChars:a.settings.autocomplete_min,Delay:300,_Position:function(){},_Open:function(){var t=this;Array.prototype.forEach.call(this.DOMResults.getElementsByTagName("li"),function(o){o.getAttribute("class")!="locked"&&(o.onmousedown=function(){t._Select(o)})})},_Select:function(t){S.defaults._Select.call(this,t);var o=t.closest("form");o&&o.submit()},_MinChars:function(){return this.Input.value.indexOf("!")>-1?0:S.defaults._MinChars.call(this)},KeyboardMappings:Object.assign({},S.defaults.KeyboardMappings,{KeyUpAndDown_up:Object.assign({},S.defaults.KeyboardMappings.KeyUpAndDown_up,{Callback:function(t){S.defaults.KeyboardMappings.KeyUpAndDown_up.Callback.call(this,t);var o=this.DOMResults.querySelector("li.active");o&&S.defaults._Select.call(this,o)}}),Tab:Object.assign({},S.defaults.KeyboardMappings.Enter,{Conditions:[{Is:9,Not:!1}],Callback:function(t){if(this.DOMResults.getAttribute("class").indexOf("open")!=-1){var o=this.DOMResults.querySelector("li.active");o!==null&&(S.defaults._Select.call(this,o),t.preventDefault())}}})})},"#"+p)),S.prototype.ajax=function(t,o,c){c===void 0&&(c=!0),t.$AjaxTimer&&window.clearTimeout(t.$AjaxTimer),c===!0?t.$AjaxTimer=window.setTimeout(S.prototype.ajax.bind(null,t,o,!1),t.Delay):(t.Request&&t.Request.abort(),t.Request=o,t.Request.send(encodeURIComponent(t._QueryArg())+"="+encodeURIComponent(t._Pre())))},!i&&document.querySelector(".index_endpoint")&&m.focus()),m!==null&&a.settings.search_on_category_select&&d.querySelector(".search_filters")!=null&&(a.on(d.getElementById("safesearch"),"change",u),a.on(d.getElementById("time_range"),"change",u),a.on(d.getElementById("language"),"change",u));const n=d.querySelectorAll("button.category_button");for(let t of n)a.on(t,"click",o=>{if(o.shiftKey){o.preventDefault(),t.classList.toggle("selected");return}const c=d.querySelectorAll("button.category_button.selected");for(let l of c)l.classList.remove("selected");t.classList.add("selected")});const e=d.querySelector("#search");e!=null&&a.on(e,"submit",t=>{t.preventDefault();const o=d.querySelector("#selected-categories");if(o){let c=[];for(let l of n)l.classList.contains("selected")&&c.push(l.name.replace("category_",""));o.value=c.join(",")}e.submit()})})})(window,document,window.searxng);
//# sourceMappingURL=searxng.min.js.map
